---
import BaseLayout from "../layouts/BaseLayout.astro";
import BlogFeed from "../components/BlogFeed.astro";
import { getCollection } from "astro:content";
import FeedLabel from "../components/FeedLabel.astro";
import FeedWrapper from "../components/FeedWrapper.astro";

const allPosts = await getCollection("posts");
const blogPostPreviews = allPosts
  .filter((post) => post.data.type === "blogPost")
  .toSorted((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .map(({ data, slug }) => ({ data, slug }));
---

<BaseLayout title="Blog" description="Axel Ingadi's blog posts">
  <FeedWrapper>
    <FeedLabel title="Posts">
      <div aria-description="Posts by Axel Ingadi">
        <BlogFeed blogPostPreviews={blogPostPreviews} />
      </div>
    </FeedLabel>
  </FeedWrapper>
</BaseLayout>
